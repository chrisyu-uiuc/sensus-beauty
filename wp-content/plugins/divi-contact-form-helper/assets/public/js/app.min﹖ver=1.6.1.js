window.PWH_DCFH=window.PWH_DCFH||{},function(y){"use strict";const x=pwh_dcfh_params.i10n,t=".et_pb_contact_form_container",e=".et_pb_contact_form",w=".et_pb_contact_submit",H=".et-pb-contact-message",a=y("."+pwh_dcfh_params.datepickerClass),n=y(".et_pb_contact_select2"),i="."+pwh_dcfh_params.uploadFileClass,F=new Date;PWH_DCFH.init=function(){0<y(e).length&&(pwh_dcfh_params.isSuperAdmin&&0<y(".et_pb_contact_form_container").length&&PWH_DCFH.handleFormDuplicateWarning(),0<y(".et_pb_textarea_validation").length&&(PWH_DCFH.formSubmitCounter=0,PWH_DCFH.handleTextareaValidation()),0<y(i).length&&(PWH_DCFH.handleUploadFiles(),PWH_DCFH.handleRemoveFile()),0<a.length&&PWH_DCFH.handleDateTimePicker(),0<n.length&&PWH_DCFH.handleSelect2(),0<y(".et_pb_signature_pad_container").length&&PWH_DCFH.handleSignaturePad(),PWH_DCFH.handleUniqueViewCookie(),PWH_DCFH.handleLoadingIcon(),PWH_DCFH.handleRedirectForm(),PWH_DCFH.handleContactMessageClass(),PWH_DCFH.handleETCustom())},PWH_DCFH.handleFormDuplicateWarning=()=>{let i=[];if(1<y(t).length)for(var e in y(t).each(function(e,t){var a=y(this).attr("id"),n=y(this).data("form_unique_id");i[n]?i[n].push(a):i[n]=[a]}),i){e=i[e];1<e.length&&y(e).each(function(e,t){y("#"+t).prepend("<div class='et_pb_duplicate_form_id_warning'>"+x.duplicate_form_id_text+"</div>")})}},PWH_DCFH.handleUniqueViewCookie=()=>{y(t).each(function(e,t){var a=y(this).data("form_unique_id"),n=y(this).find("form").attr("data-unique-views-cookies");void 0!==a&&void 0!==n&&"on"===n&&(n="pwh_dcfh_uniqueviews_"+pwh_dcfh_params.userIPAddress+"_"+a,PWH_DCFH.setCookie(n,"pwh_dcfh_unique_views",364))})},PWH_DCFH.handleLoadingIcon=()=>{y.fn.fadeToOrig=y.fn.fadeTo,y.fn.fadeTo=function(){var e=y(this),t=".et_pb_contact_form_overlay";return e.find(t).length&&arguments[1]<1&&e.find(t).show(),y.fn.fadeToOrig.apply(this,arguments)}},PWH_DCFH.handleDateTimePicker=()=>{a.each(function(){let e=y(this).parents('div[class*="et_pb_contact_form_container"]').attr("class"),a=(e=void 0!==e?e.replace("et_pb_module","").replace("et_pb_contact_form_container","").replace("clearfix","").trim():"",`input[name="${y(this).attr("name")}"]`),n=y(a).data("config"),i=n.type;var t=n.show_inline,s=n.setcurrent_datetime,l=n.rtl,o=n.disabled_weeks;let d=n.disabled_week_days;var _=n.date_format,r=n.time_format,c=n.min_date_type,p=n.min_date,f=n.max_date_type,u=n.max_date;let m=n.available_dates;var h=n.unavailable_dates,v=n.min_time,b=n.max_time;let g=n.available_times,C=n.unavailable_times,x=n.available_day_times,w=n.unavailable_day_times,H=n.disabled_past_times;var D={yearStart:1900,inline:!1,step:n.time_steps,closeOnDateSelect:!1,dayOfWeekStart:n.week_start,className:e,todayButton:!1,validateOnBlur:!1,formatDate:"Y-m-d",scrollMonth:!1,scrollTime:!1,scrollInput:!1};"date"===i?D.format=_:"time"===i?D.format=r:D.format=_+" "+r,D.datepicker=""!==_,""!==r?(D.timepicker=!0,D.formatTime=r):D.timepicker=!1,void 0!==t&&"on"===t&&(D.inline=!0,D.lazyInit=!0,D.allowBlank=!0),void 0!==s&&"on"===s&&(D.value=F),void 0!==l&&"on"===l&&(D.rtl=!0),"off"===o&&(D.weeks=!0),""!==d&&("string"===jQuery.type(d)?(d=d.split(",").map(function(e){return parseInt(e)}),D.disabledWeekDays=d):D.disabledWeekDays=[d]),void 0!==n.disabled_past_days&&"on"===n.disabled_past_days&&(D.minDate=0),void 0!==c&&("fixed"===c&&(_=new Date(p),D.minDate=p,D.defaultDate=_,D.startDate=_),"relative"===c)&&(D.minDate=p),void 0!==f&&("fixed"===f&&(D.maxDate=u),"relative"===f)&&(D.maxDate=u),void 0!==m&&(D.startDate=m.split(",",1).toString(),D.allowDates=m),void 0!==h&&(D.disabledDates=h),void 0!==v&&(D.minTime=v),void 0!==b&&(D.maxTime=b),void 0!==g&&(D.allowTimes=g.split(",")),D.onSelectDate=function(e,t){var a,e=new Date(e).toLocaleDateString("en",{weekday:"long"}).toLowerCase();if(void 0!==x&&(void 0!==x["available_times_"+e]&&0<x["available_times_"+e].length?(e=x["available_times_"+e].split(","),this.setOptions({allowTimes:e})):this.setOptions({allowTimes:""})),void 0!==g&&0<(e=y(".xdsoft_time").first().text()).length&&((a=t.val().split(" ")).pop(),a.push(e),t.val(a.join(" "))),void 0===C&&void 0===H||0<(e=y(".xdsoft_time:not(.xdsoft_disabled)").first().text()).length&&((a=t.val().split(" ")).pop(),a.push(e),t.val(a.join(" "))),"both"===i&&(void 0!==x||void 0!==w)){let e=t.val().split(" ");e.pop(),e=e.join(" "),t.val(e)}},D.onSelectTime=function(e,t){},D.onGenerate=function(e,t){let s=new Date(e);e=s.toLocaleDateString("en",{weekday:"long"}).toLowerCase();if(y(this).css("left",y(a).offset().left),y(this).css("width","auto"),void 0!==n.disabled_current_date&&"on"===n.disabled_current_date&&y(this).find(".xdsoft_today").removeClass("xdsoft_current").removeClass("xdsoft_today").addClass("xdsoft_disabled"),void 0!==m&&setTimeout(function(){y.each(m.split(","),function(e,t){var t=new Date(t);void 0!==t&&(t=y(`td[data-date="${t.getDate()}"][data-month="${t.getMonth()}"]`)).hasClass("xdsoft_disabled")&&t.removeClass("xdsoft_disabled")})},100),void 0!==C){let n=C.split(",");y(this).find(".xdsoft_time").each(function(e,t){var a=y(this);-1!==y.inArray(a.text(),n)&&a.toggleClass("xdsoft_disabled")})}if(void 0!==w&&void 0!==w["unavailable_times_"+e]&&0<w["unavailable_times_"+e].length){let n=w["unavailable_times_"+e].split(",");y(this).find(".xdsoft_time").each(function(e,t){var a=y(this);-1!==y.inArray(a.text(),n)&&a.toggleClass("xdsoft_disabled")})}void 0!==H&&y(this).find(".xdsoft_time").each(function(e,t){var a=y(this);if(""!==a.text()){var n=a.text().match(/(\d+):(\d+)([ap]m)?/i);if(n){let e=parseInt(n[1],10);var i=parseInt(n[2],10),n=n[3]?n[3].toLowerCase():null,n=("pm"===n&&12!==e?e+=12:"am"===n&&12===e&&(e=0),new Date),i=(n.setHours(e,i,0,0),new Date);n<i&&i.getDate()===s.getDate()&&a.toggleClass("xdsoft_disabled")}}})},y.datetimepicker.setLocale(n.locale),y(a).datetimepicker(D)})},PWH_DCFH.handleSelect2=()=>{n.select2(),y(document).on("select2:open",e=>{e=e.target.id;y(".select2-search__field[aria-controls='select2-"+e+"-results']").each(function(e,t){t.focus()})})},PWH_DCFH.handleSignaturePad=()=>{y(document).on("submit","form.et_pb_contact_form",function(e){e.preventDefault(),y.each(y(this).find(".et_pb_signature_pad_container"),function(e,t){var a=y(this),n=a.find("canvas");a.find("input[type='text']").hasClass("et_contact_error")?n.addClass("et_pb_required_border"):n.removeClass("et_pb_required_border")})}),y(".et_pb_signature_pad_container").each(function(e,t){let a=y(this),i=a.parents('div[class*="et_pb_contact_form_container"]'),s=i.find(H+".et_pb_contact_message_top"),l=("none"===s.css("display")&&(s=i.find(H+".et_pb_contact_message_bottom")),a.find("canvas"));if(0<l.length){var o=a.data("config");if(void 0!==o){var d=""===o.width?.97*y(l).parents('p[class*="et_pb_contact_field"]').outerWidth():o.width,_=o.height;l.attr("width",d),l.attr("height",_);let n=new SignaturePad(l[0],{backgroundColor:o.background,penColor:o.color,maxWidth:o.pen_thickness});var r=!1;a.find(".save").click(function(){var e;a.find(".et_pb_signature_pad_message").text(""),n.isEmpty()?r||(0<s.children().length?s.find("ul").first().append(`<li>${x.siganture_empty_text}</li>`):s.append(`<ul><li>${x.siganture_empty_text}</li></ul>`),r=!0):(r=!1,window.confirm(x.siganture_before_save_text)&&""!==(e=n.toDataURL())&&y.ajax({type:"post",dataType:"json",url:pwh_dcfh_params.ajaxURL,data:{action:"save_digital_signature",_wpnonce:pwh_dcfh_params.ajaxNonce,data_url:e},beforeSend:function(){i.find(".et_pb_contact_spinner").addClass("is-active"),a.find("input[type='text']").val(""),n.off()},success:function(e){e.success&&(a.find(".save").addClass("et_pb_d_none"),l.hasClass("et_pb_required_border")&&l.removeClass("et_pb_required_border"),a.find("input[type='text']").val(e.data.filename),a.find(".et_pb_signature_pad_message").text(e.data.message))},complete:function(){i.find(".et_pb_contact_spinner").removeClass("is-active"),s.find("ul li").filter(function(){return y(this).text()===x.siganture_empty_text}).remove()},error:function(e,t,a){n.on()}}))}),a.find(".clear").click(function(){var e;n.isEmpty()||(a.find(".et_pb_signature_pad_message").text(""),n.clear(),""!==(e=a.find("input[type='text']").val())&&y.ajax({type:"post",dataType:"json",url:pwh_dcfh_params.ajaxURL,data:{action:"delete_digital_signature",_wpnonce:pwh_dcfh_params.ajaxNonce,filename:e},beforeSend:function(){i.find(".et_pb_contact_spinner").addClass("is-active"),a.find("input[type='text']").val("")},success:function(e){e.success&&(a.find(".save").removeClass("et_pb_d_none"),a.find(".et_pb_signature_pad_message").text(e.data),n.on())},complete:function(){a.find("input[type='text']").val(""),i.find(".et_pb_contact_spinner").removeClass("is-active")},error:function(e,t,a){}}))})}}})};var D=null,P={},k=[];PWH_DCFH.handleUploadFiles=()=>{y(document).on("submit","form.et_pb_contact_form",function(t){if(t.preventDefault(),null!==D){t=y(this).parents('div[class*="et_pb_contact_form_container"]');let e=t.find(H+".et_pb_contact_message_top");0<(e="none"===e.css("display")?t.find(H+".et_pb_contact_message_bottom"):e).children().length?e.find("ul").first().append(D):e.append(`<ul>${D}</ul>`)}y.each(y(this).find(".et_pb_contact_hidden_files"),function(e,t){var a=y(this),n=a.data("field-id");a.hasClass("et_contact_error")?void 0!==a.data("required_mark")&&"required"===a.data("required_mark")&&y("p.et_pb_contact_field.et_pb_contact_field_"+n).addClass("et_pb_required_border"):a.attr("novalidate")||""!==a.val()||"undefined"===a.data("required_mark")||"required"!==a.data("required_mark")?y("p.et_pb_contact_field.et_pb_contact_field_"+n).removeClass("et_pb_required_border"):y("p.et_pb_contact_field.et_pb_contact_field_"+n).addClass("et_pb_required_border")})}),y("body").on("click",".et_pb_file_upload_button",function(e){e.preventDefault(),y(this).parent().find(i).trigger("click")}),y("body").on("change",i,function(){var t=new FormData;let n=!1,a="";var e=y(this);let i=e.parents('div[class*="et_pb_contact_form_container"]'),s=e.parent(),l=e.closest("form"),o=l.find(w).text(),d=l.find(w).data("wait-text"),_=e.data("field-id");var r=e.prop("files");let c=e.attr("name");var p=e.data("limit"),f=e.data("size"),u=e.data("size-formatted"),e=e[0].hasAttribute("multiple");let m=`input:file[name=${c}]`,h=`input:text[name=${c}]`;var v=`input:hidden[name=${c}_file_token]`;let b=y("#et_pb_accepted_files_desc_"+_),g=i.find(H+".et_pb_contact_message_top"),C=("none"===g.css("display")&&(g=i.find(H+".et_pb_contact_message_bottom")),y("p.et_pb_contact_field.et_pb_contact_field_"+_));P.hasOwnProperty(_)||(P[_]=[]),e||1!==P[_].length||(a+=`<li>${x.x_files_allow_text.replace("{allowed_files}",1)}</li>`,n=!0),r.length+P[_].length>p&&(a+=`<li>${x.x_files_allow_text.replace("{allowed_files}",p)}</li>`,n=!0);for(let e=0;e<=r.length-1;e++)r[e].size>=f&&(a+=`<li>${x.allow_filesize_text.replace("{filename}",r[e].name).replace("{allowed_filesize}",u)}</li>`,n=!0);if(n&&(D=a,y(m).val(""),y(h).addClass("et_contact_error"),y(h).attr("data-required_mark","required"),0<g.children().length?g.find("ul").first().append(a):g.append(`<ul>${a}</ul>`),C.addClass("et_pb_required_border"),g.addClass("et_pb_contact_error_meesage")),!1===n){for(let e=0;e<=r.length-1;e++){if(k.includes(r[e].name))return a+=`<li>${x.already_attached_text.replace("{filename}",r[e].name)}</li>`,0<g.children().length?g.find("ul").first().append(a):g.append(`<ul>${a}</ul>`),void C.addClass("et_pb_required_border");t.append(e,r[e]),k.push(r[e].name)}t.append("action","upload_file"),t.append("_wpnonce",pwh_dcfh_params.ajaxNonce),t.append("token",y(v).val()),y.ajax({type:"post",dataType:"json",contentType:!1,processData:!1,url:pwh_dcfh_params.ajaxURL,data:t,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable&&(e=Math.round(e.loaded/e.total*100),b.html(x.uploading_text.replace("{percentage}",e+"%")))},!1),e},beforeSend:function(){g.find('ul li:contains("'+s.find("label.et_pb_contact_form_label").text()+'")').remove(),C.removeClass("et_pb_required_border"),0===g.find("li").length&&g.find("p").remove(),i.find(".et_pb_contact_spinner").addClass("is-active"),y(m).prop("disabled",!0),l.find(w).prop("disabled",!0),l.find(w).text(d)},success:function(e){if(!1!==e.success){if(0<e.data.success.length){let a="";y.each(e.data.success,function(e,t){a=(a=(a=(a+=`<span class="et_pb_file" data-id="${t.name}">`)+`<a href="${t.url}" class="et_pb_file_name" download>${t.tmp_name}</a>`)+`<span class="et_pb_file_size">(${t.size})</span>`)+`<span class="et-pb-icon et_pb_delete_file" aria-hidden="true" title="${x.delete_file_icon_hover_text}"  data-field-id="${_}" data-field-name="${c}" data-file-name="${t.name}"  data-file-tmp-name="${t.tmp_name}">&#x4d;</span>`+"</span>",P.hasOwnProperty(_)||(P[_]=[]),P[_].push(t.name)}),s.find(".et_pb_files_list").append(a),y(h).val(P[_].join())}if(0<e.data.errors.length){n=!0;let a="";y.each(e.data.errors,function(e,t){a+=`<li>${t.message}</li>`}),0<g.children().length?g.find("ul").first().append(a):g.append(`<ul>${a}</ul>`),g.addClass("et_pb_contact_error_meesage"),C.addClass("et_pb_required_border"),D=a}}else g.append(e.data)},complete:function(){y(m).val(""),b.html(b.data("description")),i.find(".et_pb_contact_spinner").removeClass("is-active"),y(m).prop("disabled",!1),l.find(w).prop("disabled",!1),l.find(w).text(o);let e=y(h).val().split(",").length,t="";x.selected_files_text.match(/\{_.+?}/g)&&(t=(t=x.selected_files_text.match(/\{_.+?}/g).map(function(e){return e.slice(1,-1).replaceAll("_","")})).find(e=>!!e)),!1===n&&(e=1===e?x.selected_files_text.replace("{chosen_files_count}",e).replace(`{_${t}_}`,""):x.selected_files_text.replace("{chosen_files_count}",e).replace(`{_${t}_}`,t),s.find(".et_pb_file_chosen_desc").text(e))},error:function(e,t,a){}})}})},PWH_DCFH.handleRemoveFile=()=>{y("body").on("click",".et_pb_delete_file",function(){var e=y(this);let a=e.parents('div[class*="et_pb_contact_form_container"]'),s=e.closest("form"),l=s.find(w).text(),o=s.find(w).data("wait-text"),d=e.data("file-tmp-name"),_=e.data("file-name");if(confirm(x.remove_file_text.replace("{filename}",d))){let t=y(H).parent().find(H);var r=e.data("field-name");let i=e.data("field-id");if(""!==r&&""!==_){let n=`input:text[name="${r}"]`;y.ajax({type:"post",dataType:"json",url:pwh_dcfh_params.ajaxURL,data:{action:"remove_file",_wpnonce:pwh_dcfh_params.ajaxNonce,file_name:_},beforeSend:function(){a.find(".et_pb_contact_spinner").addClass("is-active"),s.find(w).prop("disabled",!0),s.find(w).text(o)},success:function(e){if(!0===e.success){y('span[data-id="'+_+'"]').remove();var a=y(n).val().split(",").filter(function(e){return e!==_});P[i]=a,y(n).val(a.join(",")),k=k.filter(function(e){return e.replace(/\s+/g,"-")!==d});let e=a.length,t="";x.selected_files_text.match(/\{_.+?}/g)&&(t=x.selected_files_text.match(/\{_.+?}/g).map(function(e){return e.slice(1,-1).replaceAll("_","")})),e=1===e?x.selected_files_text.replace("{chosen_files_count}",e).replace(`{_${t}_}`,""):1<e?x.selected_files_text.replace("{chosen_files_count}",e).replace(`{_${t}_}`,t):x.chosen_file_text,s.find(".et_pb_file_chosen_desc").text(e)}else t.html("<p>"+e.data+"</p>")},complete:function(){a.find(".et_pb_contact_spinner").removeClass("is-active"),s.find(w).prop("disabled",!1),s.find(w).text(l)},error:function(e,t,a){}})}}})},PWH_DCFH.handleRedirectForm=()=>{y(document).on("submit","form"+e,function(e){var a=y(this),n=a.parents('div[class*="et_pb_contact_form_container"]');if(void 0!==n){let e=y(n).find("form").data("redirect-url"),t=y(n).find("form").data("redirect-delay");if(void 0!==e&&void 0!==t){const i=setInterval(function(){0===a.parents('div[class*="et_pb_contact_form_container"]').find("form").length&&(clearInterval(i),setTimeout(function(){location.href=e},t))},1e3)}}})},PWH_DCFH.handleContactMessageClass=()=>{y(document).on("submit","form"+e,function(e){var t=y(this),a=t.parents(),a=y(a.get(1)).hasClass("et_pb_recaptcha_enabled")||!1,t=t.parents('div[class*="et_pb_contact_form_container"]');let n=t.find(H+".et_pb_contact_message_top");if("none"===n.css("display")&&(n=t.find(H+".et_pb_contact_message_bottom")),!a&&0<n.children().length)n.addClass("et_pb_contact_error_meesage");else if(a){const i=setInterval(function(){0<n.children().length&&(clearInterval(i),n.addClass("et_pb_contact_error_meesage"))},50)}})},PWH_DCFH.handleTextareaValidation=()=>{y(document).on("submit","form"+e,function(e){let r=y(this),c=y(r.parents().get(1)).hasClass("et_pb_recaptcha_enabled")||!1;PWH_DCFH.formSubmitCounter=PWH_DCFH.formSubmitCounter+1,1===PWH_DCFH.formSubmitCounter&&r.find(".et_pb_textarea_validation").each(function(e,t){var a=y(this),n=a.data("field-name"),i=y("#"+n);let s=a.data("title");var l=i.data("pattern");let o=i.data("message");i=new RegExp("^"+l+"$");let d={};l=r.parents('div[class*="et_pb_contact_form_container"]');let _=l.find(H+".et_pb_contact_message_top");(_="none"===_.css("display")?l.find(H+".et_pb_contact_message_bottom"):_).has("ul").find("li").each(function(e,t){var a=y(this).text().toLowerCase();d[a]?y(this).remove():d[a]=!0}),""!==document.all[n].value&&(y.trim(document.all[n].value).match(i)?(a.val(!0),a.removeClass("et_contact_error"),a.removeAttr("data-required_mark"),c||r.submit()):(PWH_DCFH.formSubmitCounter=0,a.val(""),a.addClass("et_contact_error"),a.attr("data-required_mark","required"),c?setTimeout(function(){_.find('ul li:contains("'+s+'")').html(o)},500):_.find('ul li:contains("'+s+'")').html(o)))})})},PWH_DCFH.handleETCustom=()=>{"undefined"!=typeof et_pb_custom&&(et_pb_custom.fill_message=x.fill_message_text,et_pb_custom.contact_error_message=x.fix_message_text)},PWH_DCFH.handlesynchronizingICSURL=()=>{y(document).on("click","button.ics_url_sync_btn",function(t){t.preventDefault();let a=y(this);t=a.data("wpnonce");let n=y(this).parents('div[class*="et-fb-form__group"]').prev();if(0<n.length){let e=a.text();var i=n.find("input").val();""!==i&&""!==t?y.ajax({type:"post",dataType:"json",url:pwh_dcfh_params.ajaxURL,data:{action:"sync_ics_url",_wpnonce:t,url:decodeURIComponent(i)},beforeSend:function(){n.prev().prev().find("input").val(""),n.prev().prev().find("input").focus(),n.prev().prev().find("input").click(),a.text("Please wait synchronizing data from url...")},success:function(t){t.success?setTimeout(function(){var e=t.data.dates_str.replace(/,(?=[^,]*$)/,"");n.prev().prev().find("input").val(e),n.prev().prev().find("input").focus(),n.prev().prev().find("input").click(),y(".et-fb-button--publish").click()},500):alert(t.data)},complete:function(){a.text(e),n.find("input").val("")},error:function(e,t,a){}}):alert("Please add ICS Feed URL.")}})},PWH_DCFH.setCookie=function(t,a,n){if(null===PWH_DCFH.getCookie(t)){let e="";n&&(F.setTime(F.getTime()+24*n*60*60*1e3),e="; expires="+F.toUTCString()),document.cookie=t+"="+(a||"")+e+"; path=/"}},PWH_DCFH.getCookie=function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},PWH_DCFH.messageConatiner=function(e){let t=y(e.parents().get(3)).find(H+".et_pb_contact_message_top");return t="none"===t.css("display")?y(e.parents('div[class^="et_pb_contact"]').next()):t},y(PWH_DCFH.init)}(jQuery);